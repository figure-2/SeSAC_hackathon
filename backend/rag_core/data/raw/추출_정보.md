## 📊 **원본 PDF → JSON → 추가 데이터 생성 과정 정리표**

### **1️⃣ 원본 PDF에서 추출한 JSON 데이터**

| 구분 | 내용 | 수량 | 저장 위치 |
|------|------|------|-----------|
| **원본 PDF** | 벌거벗은한국사-조선편.pdf | 197페이지 | - |
| **처리 도구** | 업스테이지 parser API 1.1 | - | - |
| **JSON 파일** | 분할된 PDF별 JSON | 20개 | `data/` 폴더 |
| **텍스트 요소** | paragraph, heading1 등 | 72개 | JSON 내부 |
| **이미지 요소** | figure | 1개 | JSON 내부 |
| **테이블 요소** | table | 3개 | JSON 내부 |
| **좌표 정보** | bounding_box | - | JSON 내부 |
| **페이지 정보** | page 번호 | 197개 | JSON 내부 |

### **2️⃣ JSON 데이터를 기반으로 생성된 추가 데이터**

| 구분 | 원본 데이터 | 처리 방법 | 결과 | 수량 | 저장 위치 |
|------|-------------|-----------|------|------|-----------|
| **이미지 캡쳐** | JSON의 figure 요소 + bounding_box 좌표 | 좌표를 이용한 이미지 크롭 | PNG 이미지 파일 | 62개 | `data/벌거벗은한국사-조선편/` |
| **테이블 추출** | JSON의 table 요소 + 좌표 | 좌표를 이용한 테이블 이미지 크롭 | PNG 이미지 + 마크다운 | 3개 | PNG 파일 + `table_markdowns.json` |
| **텍스트 추출** | JSON의 paragraph, heading1 등 텍스트 요소 | 페이지별로 텍스트 요소들을 결합 | 페이지별 텍스트 내용 | 197개 | `document_analysis_results.json` |
| **페이지 메타데이터** | JSON의 페이지 정보 | 페이지 크기 등 메타데이터 추출 | 페이지별 메타데이터 | 197개 | `document_analysis_results.json` |

### **3️⃣ AI API를 통해 생성된 요약 데이터**

| 구분 | 원본 데이터 | 처리 방법 | 결과 형식 | 수량 | 저장 위치 |
|------|-------------|-----------|-----------|------|-----------|
| **텍스트 요약** | JSON의 텍스트 요소들 | OpenAI API로 페이지별 요약 | 구조화된 마크다운 형식 | 197개 | `text_summaries.json` |
| **이미지 요약** | 캡쳐된 PNG 이미지 파일들 | OpenAI Vision API로 이미지 분석 | XML 형식의 이미지 설명 | 62개 | `image_summaries.json` |
| **테이블 마크다운** | 캡쳐된 테이블 PNG 이미지들 | OpenAI Vision API로 테이블 구조 분석 | 마크다운 표 형식 | 3개 | `table_markdowns.json` |

### **4️⃣ 최종 생성된 데이터 요약**

| 데이터 유형 | 수량 | 파일 크기 | 용도 |
|-------------|------|-----------|------|
| **원본 JSON** | 20개 파일 | - | 원본 파싱 데이터 |
| **이미지 파일** | 62개 PNG | - | 시각적 콘텐츠 |
| **텍스트 요약** | 197개 페이지 | 112KB | 텍스트 검색용 |
| **이미지 요약** | 62개 | 39KB | 이미지 검색용 |
| **테이블 마크다운** | 3개 | 2KB | 테이블 검색용 |
| **메타데이터** | 197개 페이지 | - | 페이지 정보 |
| **통합 결과** | 1개 | 3.9MB | `document_analysis_results.json` |

### **🎯 데이터 처리 흐름**

```
원본 PDF (197페이지)
    ↓ [업스테이지 parser API]
JSON 파일 (20개) + 좌표 정보
    ↓ [이미지/테이블 크롭]
PNG 이미지 (62개) + 테이블 이미지 (3개)
    ↓ [OpenAI API 요약]
텍스트 요약 (197개) + 이미지 요약 (62개) + 테이블 마크다운 (3개)
    ↓ [통합]
RAG 시스템용 완성 데이터
```